import requests_with_caching
import json

def get_movies_from_tastedive(s):
    p = dict()
    p['q'] = s
    p['type'] = 'movies'
    p['limit'] = 5
    movie = requests_with_caching.get('https://tastedive.com/api/similar',p)
    movie_resp = movie.json()
    return movie_resp
def extract_movie_titles(s2):
    lst=[]
    for i in s2['Similar']['Results']:
        lst.append(i['Name'])
    return (lst)
def get_related_titles(l):
    lst = []
    for i in l:
        e = extract_movie_titles(get_movies_from_tastedive(i))
        for i2 in e:
            if i2 not in lst :
                lst.append(i2)
    return (lst)
# some invocations that we use in the automated tests; uncomment these if you are getting errors and want better error messages
get_related_titles(["Black Panther", "Captain Marvel"])
get_related_titles([])


